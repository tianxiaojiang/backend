<script type="text/html" template lay-done="editAdminCallback();">
    <form class="layui-form">
        <div class="layui-form-item layui-hide">
            <label class="layui-form-label">角色编号</label>
            <div class="layui-input-block"><input type="text" class="layui-input layui-disabled" disabled name="id" required lay-verify="required" placeholder="角色编号" value="{{ d.params.ad_uid }}" autocomplete="off" class="layui-input" /></div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">账号</label>
            <div class="layui-input-block"><input type="text" class="layui-input layui-disabled" disabled name="account" placeholder="账号" value="{{d.params.account}}" autocomplete="off" class="layui-input" /></div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">新密码</label>
            <div class="layui-input-inline"><input type="password" name="reset_passwd" placeholder="密码" autocomplete="off" class="layui-input" /></div>
            <div class="layui-form-mid layui-word-aux">密码最少6位字符</div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit="" lay-filter="reset-password">提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</script>
<script>
    var editAdminCallback = function (d) {
        layui.use(['table', 'laytpl', 'form', 'ztutil', 'admin', 'view'], function () {

            var $ = layui.jquery, table = layui.table, form = layui.form, admin = layui.admin;

            // 编辑管理员按钮
            form.on('submit(reset-password)', function (data) {
                var options = {
                    data: data.field,
                    url: '/admin/admin-user/reset-password?ad_uid=' + data.field.id,
                    method: 'patch',
                    done: function () {
                        layer.closeAll();
                        table.reload('system-admins-id');
                        layer.msg('重置密码成功！');
                    }
                };
                admin.req(options);
                return false;
            });
        });
    };
</script>